<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>登录</title>
    <link href="style.css" rel="stylesheet">
</head>
<body>
<div id="login">登录</div>
<div id="wrapper">
    <!-- <div id="ver-helper">垂直居中</div> -->
	<div id="signbox">
	    <div id="toptext">
	        <span class="green-color">登录</span>
	        <a href="#" class="forget-pwd" id="close">X</a>
	    </div>
		<div id="form">	
			<form>
				<div class="input-box">
				    <input id="account" type="text" placeholder="请输入邮箱账号/手机号">
				</div>
				<div class="input-box tip" id="accounttip">*邮箱地址不正确*</div>
				<div class="input-box">
				    <input id="pwd" type="password" placeholder="请输入密码">
				</div>
				<div class="input-box tip" id="pwdtip">*密码不能为空*</div>
				<div class="input-box" id="register">
				    <span>还没有账号？
				        <a class="green-color" href="#">立即注册</a>
				    </span>
				    <a href="" class="green-color forget-pwd">忘记密码？</a>
				</div>
				<div>
				    <input id="submit-btn" type="submit" value="登录">
				</div>
			</form>
		</div>
	</div>
</div>
<script type="text/javascript">
    function addEvent(element,type,handler){
    	if(element.addEventListener){
    		element.addEventListener(type,handler,false);
    	}else if(element.attachEvent){
    		element.attachEvent('on'+type,handler);
    	}else{
    		element['type']=handler;
    	}
    }
    function removeEvent(element,type,handler){
    	if(element.removeEventListener){
    		element.removeEventListener(type,handler,false);
    	}else if(element.detachEvent){
    		element.detachEvent('on'+type,handler);
    	}else{
    		element['on'+type]=null;
    	}
    }

    function accountTip(){
    	var email_re=/^([A-Za-z])([a-zA-Z0-9_\-])+@([A-Za-z0-9_\-])+(\.)([A-Za-z]){2,3}/;
    	var phonenum_re=/1(3|5|7|8)\d{9}/;
    	var value=this.value;
  
        if (/\D+/.test(value)==false){
           	if(phonenum_re.test(value) && value.length==11){
           		accounttip.style.display='none';
           	}else{
           	 accounttip.innerHTML="您的手机号格式不对";
           	 accounttip.style.display="block";
           	}
        }else if(email_re.test(value)==false){
    		accounttip.innerHTML="*邮箱地址格式错误*";
    		accounttip.style.display='block';   		
    	}else{
    		accounttip.style.display='none';
    	}
    }
    function pwdTip(){
    	var value=this.value;
    	if(value==''||null){
    		pwdtip.innnerHTML='密码不能为空';
    		pwdtip.style.display='block';
    	}else if(value.length<6){
            pwdtip.innerHTML='密码长度至少为6位数';
            pwdtip.style.display='block';
    	}else{
    		pwdtip.style.display='none';
    	}
    }

    /* 关闭登陆框 */
    function closeBox(event){
    	var wrapper=document.getElementById('wrapper');
    	wrapper.style.display='none';
    	event=event||window.event;
    	event.stopPropagation();

    	// var login=document.getElementById('login');
    	// login.style.display='display';
    }
    // 弹出登陆框
    function logIn(){
    	var wrapper=document.getElementById('wrapper');
    	wrapper.style.display='block';

    	// var login=document.getElementById('login');
    	// login.style.display='none';
    }

    // 拖动弹窗
    function drag(e){
    	var e=e||window.e,
    	    signbox=document.getElementById('signbox'),
    	    wrapper=document.getElementById('wrapper');
    	    
    	difX=e.clientX-signbox.offsetLeft;
    	difY=e.clientY-signbox.offsetTop;

    	addEvent(wrapper,'mousemove',dragmove);
    	addEvent(wrapper,'mouseup',dragleft);
     
    	function dragmove(e){
    	var e=e||window.e;
    	var l=e.clientX-difX+200,
    	    t=e.clientY-difY+200,
    	    maxWidth=wrapper.offsetWidth-signbox.offsetWidth+200;
    	    maxHeight=wrapper.offsetHeight-signbox.offsetHeight+200;
    	if(l<200){
    		l=200;
    	}else if(l>maxWidth){
    		l=maxWidth;
    	}
        
        if(t<200){
        	t=200;
        }else if(t>maxHeight){
        	t=maxHeight;
        }

    	document.title=l+":"+t;
        signbox.style.left=l+'px';
        signbox.style.top=t+'px';
       }
        function dragleft(){
        	removeEvent(wrapper,'mousemove',dragmove);
        	removeEvent(wrapper,'mouseup',dragleft);
        }

    }



	var account=document.getElementById("account"),
	    pwd=document.getElementById("pwd"),
	    accounttip=document.getElementById('accounttip'),
	    pwdtip=document.getElementById('pwdtip'),
        close=document.getElementById('close'),
        login=document.getElementById('login'),
        toptext=document.getElementById('toptext');

    addEvent(login,'click',logIn);
    addEvent(close,'click',closeBox);
	addEvent(account,'keyup',accountTip);
	addEvent(pwd,'keyup',pwdTip);
	addEvent(toptext,'mousedown',drag);
    
</script>
</body>
</html>