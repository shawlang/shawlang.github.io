<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Django开发学习笔记03 - 肖郎的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="MVC架构的特点是各自分工、互不干扰。其中Django中模板也实现了这一点，template通过模板变量和模板语法把内容和形式分开来，这其中的桥梁是模板变量。">
<meta property="og:type" content="article">
<meta property="og:title" content="Django开发学习笔记03">
<meta property="og:url" content="http://shawlang.github.io/2015/07/02/Django开发学习笔记03/index.html">
<meta property="og:site_name" content="肖郎的博客">
<meta property="og:description" content="MVC架构的特点是各自分工、互不干扰。其中Django中模板也实现了这一点，template通过模板变量和模板语法把内容和形式分开来，这其中的桥梁是模板变量。">
<meta property="og:image" content="http://www.designerspics.com/wp-content/uploads/2014/12/footprints_free_photo1-690x457.jpg">
<meta property="og:updated_time" content="2015-08-13T18:04:41.217Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Django开发学习笔记03">
<meta name="twitter:description" content="MVC架构的特点是各自分工、互不干扰。其中Django中模板也实现了这一点，template通过模板变量和模板语法把内容和形式分开来，这其中的桥梁是模板变量。">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">存档</a>
        
          <a class="main-nav-link" href="/categories">分类</a>
        
          <a class="main-nav-link" href="/tags">标签</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
          <a class="main-nav-link" href="/sideproject">个人项目</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <input type="text" class="st-default-search-input" />
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer"><article id="post-Django开发学习笔记03" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Django开发学习笔记03
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2015/07/02/Django开发学习笔记03/" class="article-date">
  <time datetime="2015-07-02T10:16:08.000Z" itemprop="datePublished">2015-07-02</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Django/">Django</a><span>></span><a class="article-category-link" href="/categories/Django/入门学习笔记/">入门学习笔记</a>
  </div>

      
        <div class="article-comment-link-wrap">
          <a href="http://shawlang.github.io/2015/07/02/Django开发学习笔记03/#disqus_thread" class="article-comment-link">评论</a>
        </div>
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="http://www.designerspics.com/wp-content/uploads/2014/12/footprints_free_photo1-690x457.jpg" alt="沙滩上的脚印"></p>
<p>MVC架构的特点是各自分工、互不干扰。其中Django中模板也实现了这一点，template通过模板变量和模板语法把内容和形式分开来，这其中的桥梁是模板变量。</p>
<a id="more"></a>


<h3> 1.模板变量的形式</h3>
  <h5>1)一般形式</h5>
  <p> 模板变量是由`{{}}`括起来的，如{{name}}。</p>
  <h5>2)过滤器（使用管道符号 |）</h5>
  <p>比如{{name|upper|capfirst}}，将{{name|upper|capfirst}}变量值首字母大写。</p>
<h3>2.建立模板文件</h3>
 
<p>在自己所创建的APP（`django-admin startapp ...`）目录下创建一个文件夹templates，专门存放模板文件，并创建模板文件，例如`index.html`，内容如下：</p>
<p>Hi,I'm {{name}}</p>
<h3>3.在views.py中的加载模板文件</h3>
<pre>
 from django.shortcuts import render
   from django.http import HttpResponse
   from django import template

 #第一种方法，直接通过源代码生成模板对象，这种方法比较直接。
 def index(request):
     t=template.Template('Hello,I\'m {{name}}') #将源代码生成一个模板对象实例

     c=template.Context({'name':'shawlang'})
     #以字典的方式传入模板变量值，也是生成一个实例对象

     return HttpResponse(t.render(c))
     #通过render()方法，生成内容，然后通过HttpResponse()返回给浏览器

 #第二种方法，加载模板文件，这种方法灵活且容易地控制模板的形式。
 from django.shortcuts import render
 from django.http import HttpResponse
 from django import template
 def index(request):
     t=template.loader.get_template('index.html')
     c=template.Context({'name':'shawlang'})
     return HttpResponse(t.render(c))

 #第三种方法，是第二种方法的简写。
 from django.http import HttpResponse
 from django.shortcuts import render_to_response
 def index(request):
     return render_to_response('index.html',{'name':'shawlang'})
 #这是一种快捷的方式
</pre>
<h3>4.在urls.py中配置</h3>
	
<p>url(r'index',index)</p>

<h3>5.常用的模板语法</h3>

<h5>1) if判断（支持 and、not、or这三个关键字）</h5>
<pre>
 {% if name %}
 This is my {{name}} 
 {% elif %}
 Do you like a nickname    
 {% else %}
 OK,you're a anoying
 {% endif %} 
</pre>
<h5>2）for循环（没有break/continue语句）</h5>
<pre>
 {% for name in class %}
 {{name}} is in the class
 {% endfor %}
</pre>
<h5>3)for循环访问键值对</h5>
<pre>
 {% for name,age in user.items %}
 I'm {{name}},and {{age}} years old
 {% endfor %}
 forloop.counter 循环次数
 forloop.revcounter 剩余循环次数
 {{ forloop.counter }}
 
 forloop.first #第一次循环
 {% forloop.last %}
 forloop.last  #最后一次循环
</pre>
<h5>4)模板继承extend</h5>

<p><b><i>[base.html]</i></b></p>
<pre>
  {% block content %}
  {% endblock %}
</pre>
<p><b><i>[inherted.html]</i></b></p>
<pre>
 {% extends "base.html" %}
 {% block content %}
 {% endblock %}
 {% block test} 小测试一下 {% endblock %}
</pre>
<p><i><b>block区块表示需要子模块重写的地方</b></i></p>

<h3>6.自定义过滤器步骤</h3>
<ul type="circle">
    <li> 在`blog/`下建立`templatetags`，并且在`templatetags/`下建立文件`__init__.py`</li>
    <li>在`templatetags/`下建立自己的过滤器文件，如`rmb.py`</li>
    <li>打开`rmb.py`创建自己的过滤器函数。
<pre>
from django import template
def rmb(value):
    return str(value)+'￥'
register=template.Library()
register.filter(rmb)
</pre>
    </li>
    <li>在哪个文件中使用，需要在文件中添加{% load rmb %}，表示导入自定义的过滤器</li>
</ul>


<h3>7.总结</h3>
<p>Django的模板其实还有很多细节问题，例如过滤器能不能被子模板继承。以后再细看[模板文档](https://docs.djangoproject.com/en/1.8/ref/templates/language/#id1)
</p>
<p>
另外，写这篇文章的时候，发现HEXO不能解析{{}}。
需要用类似于的{% load fitler_tag %}的形式用raw包裹模板变量，好像还不能嵌套。就是因为这个，这篇文章的格式是用html标签改的。
</p>

      
    </div>
  
    <footer class="article-footer">
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/django/">django</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/模板语法/">模板语法</a></li></ul>

    </footer>
  
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/07/25/Javascript-DOM事件详解/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-title"><span>&lt;</span>&nbsp;
        
          Javascript DOM事件详解
        
      </div>
    </a>
  
  
    <a href="/2015/07/02/mysql-python安装错误-fatal-error-c1083-cannot-open-include-file-config-win-h/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">mysql-python安装错误 fatal error c1083:cannot open include file:config-win.h&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 shawlang&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>

</footer>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','hpwehiRPuuBriefhgg56','2.0.0');
</script>
    
<script>
  var disqus_developer=1;
  var disqus_shortname = 'shawlang';
  
  var disqus_url = 'http://shawlang.github.io/2015/07/02/Django开发学习笔记03/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>